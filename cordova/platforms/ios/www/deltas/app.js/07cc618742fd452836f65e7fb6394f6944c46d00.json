["function _2a6b21f2a429b2d476fbf8cd4ec7bba71ab91b2f",50,1383,"client){Instinct.controller.client={}}if(!Instinct.controller.main){Instinct.controller.main",1405,97,"controller.server){Instinct.controller.server={}}if(!Instinct.controller.user){Instinct.controller.user={}}if(!Instinct.model){Instinct.model={}}if(!Instinct.model.user){Instinct.model.user={}}if(!Instinct.store){Instinct.store={}}if(!Instinct.store.user){Instinct.store.user",1485,40,"if(!Instinct.view.main){Instinct.view.main={}}if(!Instinct.view.user){Instinct.view.user={}}var settings=settings||{};var sqlite=sqlite||{};",1525,298178,"Img\",Ext.Component,{config:{src:null,baseCls:\"x-img\",imageCls:\"x-img-image\",backgroundCls:\"x-img-background\",mode:\"background\"},beforeI",311358,32,"a.onLoad=Ext.Function.bind(a.onLoad,a);a.onError=Ext.Function.bind(a.onError,a)",310592,39,279760,42,"a.relayEvents(a.renderElement,\"*\");a.element.on({tap:\"onTap\",scope:a})},hid",263344,37,"hide",427439,34,"Src=this.hiddenSrc||this.getSrc();this.setSrc(null)},show",279744,36,"show.apply(this,arguments);if(this.hiddenSrc){this.setSrc(this.hiddenSrc);delete this.hiddenSrc}},updateMode",267868,32,"mageCls(),b=c.getBackgroundCls();if(d===\"background\"){if(c.imageElement){c.imageElement.destroy();delete c.imageElement;c.updateSrc(c.getSrc())}c.replaceCls(a,b)}else{c.imageElement=c.element.createChild({tag:\"img\"});c.replaceCls(b,a)}},updateImageCls:function(b,a){this.replaceCls(a,b)},updateBackgroundCls:function(b,a){this.replaceCls(a,b)},",307763,34,"tap\",this,a)},onAfterRender:function(){this.updateSrc(this.getSrc())},updateSrc:function(a){var b=this,c;if(b.getMode()===\"background\"){c=this.imageObject||new Image()}else{c=b.imageElement.dom}this.imageObject=c;c.setAttribute(\"src\",Ext.isString(a)?a:\"\");c.addEventListener(\"load\",b.onLoad,false);c.addEventListener(\"error\",b.onError,false)},detachListeners:function(){var a=this.imageObject;if(a){a.removeEventListener(\"load\",this.onLoad,false);a.removeEventListener(\"error\",this.onError,false)}},onLoad:function(a){this.detachListeners();if(this.getMode()===\"background\"){this.element.dom.style.backgroundImage='url(\"'+this.imageObject.src+'\")'}this.fireEvent(\"load\",this,a)},onError:function(a){this.detachListeners();if(this.getMode()===\"background\"){this.element.dom.style.backgroundImage='url(\"'+this.imageObject.src+'\")'}this.fireEvent(\"error\",this,a)},doSetWidth:function(b){var a=(this.getMode()===\"background\")?this.element:this.imageElement;a.setWidth(b);Ext.Componen",315632,44,"},doSetHeight:function(b){var a=(this.getMode()===\"background\")?this.element:this.imageElement;a.setHeight(b);Ext.Componen",315502,45,"},destroy:function(){this.detachListeners();Ext.destroy(this.imageObject,this.imageElement);delete this.imageObject;delete this.imageElement",299575,48,"[\"image\",\"img\"],[\"component\",\"image\",\"img\"],{component:true,image:true,img:true},[\"widget.image\",\"widget.img\"],0,[Ext,\"Img",299845,223355,"model.user.Session\",Ext.data.Model,{config:{fields:[{name:\"userId\"},{name:\"userToken\"}]}},0,0,0,0,0,0,[Instinct.model.user,\"Session",523167,33,"store.user.Session\",Ext.data.Store,{config:{buffered:true,clearOnPageLoad:false,model:\"Instinct.model.user.Session\",storeId:\"user.Session\",proxy:{type:\"ajax\",reader:{type:\"array\"}}}},0,0,0,0,[\"store.userSessionStore\"],0,[Instinct.store.user,\"Session",523167,38,"mainViewport\",Ext.Container,{config:{id:\"mainViewport\",itemId:\"mainViewport\",layout:\"card\"}},0,[\"mainV",514855,36,"mainV",522623,41,"mainViewport:true},[\"widget.mainViewport\"],0,[Instinct.view,\"main",523159,46,"Holder\",Ext.navigation.View,{config:{navigationBar:{docked:\"top\",hidden:true},items:[{xtype:\"mainViewport\"}]}},0,[\"menuHolder",523648,47,"enuHolder",520288,34,"navigationview:true,menuHolder:true},[\"widget.menuHolder\"],0,[Instinct.view,\"Holder",523167,33,"controller.client.settings",526901,32,"getSetting:function(a){if(a in settings.settings){return settings.settings[a]}else{return false}},setSetting:function(a,c,b){if(window.sqlitePlugin){sqlite.getRows(\"settings\",[\"key\"],[a],function(d){if(d){sqlite.updateRow(\"settings\",d[0].id,[\"key\",\"value\"],[a,c],function(e){b()})}else{sqlite.insertRow(\"settings\",[\"key\",\"value\"],[a,c],function(e){b()})}settings.settings[a]=c})}else{localStorage.setItem(a,c);b()}},loadSettings:function(a){if(window.cordova&&window.sqlitePlugin){settings={loadSettings:this.loadSettings,get:this.getSetting,set:this.setSetting,removeAll:this.removeAll,settings:{}};sqlite.createTable(\"settings\",[\"key\",\"value\"],[\"text\",\"text\"],function(){sqlite.query(\"SELECT * FROM Settings\",[],function(b){data=sqlite.fetch(b);settings.settings={};Ext.each(data,function(c){settings.settings[c.key]=c.value});a(settings.settings)})})}else{settings={loadSettings:function(b){b()},get:function(c){var b=localStorage.getItem(c);if(b===null&&typeof b===\"object\"){return false}else{return b}},set:function(b,d,c){localStorage.setItem(b,d);if(typeof c==\"function\"){c()}return false},removeAll:function(b){b();return true}};a(settings.settings);if(window.cordova){Ext.Msg.alert(false,\"ERROR: SQLITE PLUGIN NOT WORKING!\")}}},removeAll:function(a){if(window.sqlitePlugin){sqlite.query(\"DELETE FROM Settings\",[],function(b){a()})}},prepSettings:function(){console.log(\"settings done\");this.settings={};Ext.define(\"settings\",{singleton:true,loadSettings:this.loadSettings,get:this.getSetting,set:this.setSetting});console.log(this)",526764,36,"client,\"settings",523167,38,"main.Menu\",Ext.Panel,{config:{cls:\"mainMenuCss\",scrollable:\"vertical\",items:[{xtype:\"titlebar\",cls:\"instinctTitle\",docked:\"top\",title:\"Team Instinct App\"},{xtype:\"container\",style:\"border-top:1px solid #0e0e0e;border-bottom:1px solid #0e0e0e;\",layout:\"vbox\",items:[{xtype:\"container\",cls:\"menuButtonHolder\",itemId:\"profileHolder\",layout:\"hbox\",items:[{xtype:\"image\",cls:\"menuIcon\",width:50,src:\"resources/images/icons/profile.png\"},{xtype:\"button\",flex:1,cls:\"menuButton\",itemId:\"profile\",text:\"Profile\"}]},{xtype:\"container\",cls:\"menuButtonHolder\",itemId:\"mapHolder\",layout:\"hbox\",items:[{xtype:\"image\",cls:\"menuIcon\",width:50,src:\"resources/images/icons/map.png\"},{xtype:\"button\",flex:1,cls:\"menuButton\",itemId:\"Map\",text:\"Map\"}]},{xtype:\"container\",cls:\"menuButtonHolder\",itemId:\"inventoryHolder\",layout:\"hbox\",items:[{xtype:\"image\",cls:\"menuIcon\",width:50,src:\"resources/images/icons/inventory.png\"},{xtype:\"button\",flex:1,cls:\"menuButton\",itemId:\"inventory\",text:\"Inventory\"}]},{xtype:\"container\",cls:\"menuButtonHolder\",itemId:\"friendsHolder\",layout:\"hbox\",items:[{xtype:\"image\",cls:\"menuIcon\",width:50,src:\"resources/images/icons/friends.png\"},{xtype:\"button\",flex:1,cls:\"menuButton\",itemId:\"friends\",text:\"Friends\"}]},{xtype:\"container\",cls:\"menuButtonHolder\",itemId:\"chatHolder\",layout:\"hbox\",items:[{xtype:\"image\",cls:\"menuIcon\",width:50,src:\"resources/images/icons/chat.png\"},{xtype:\"button\",flex:1,cls:\"menuButton\",itemId:\"chat\",text:\"Chat\"}]},{xtype:\"container\",cls:\"menuButtonHolder\",itemId:\"messagesHolder\",layout:\"hbox\",items:[{xtype:\"image\",cls:\"menuIcon\",width:50,src:\"resources/images/icons/messages.png\"},{xtype:\"button\",flex:1,cls:\"menuButton\",itemId:\"messages\",text:\"Messages\"}]},{xtype:\"container\",cls:\"menuButtonHolder\",itemId:\"settingsHolder\",layout:\"hbox\",items:[{xtype:\"image\",cls:\"menuIcon\",width:50,src:\"resources/images/icons/settings.png\"},{xtype:\"button\",flex:1,cls:\"menuButton\",itemId:\"settings\",text:\"Settings\"}]},{xtype:\"container\",cls:\"menuButtonHolder\",itemId:\"LogoutHolder\",layout:\"hbox\",items:[{xtype:\"image\",cls:\"menuIcon\",width:50,src:\"resources/images/icons/logout.png\"},{xtype:\"button\",flex:1,cls:\"menuButton\",itemId:\"logout\",text:\"Logout\"}]}]}]}},0,[\"mainMenu",481116,37,"mainMenu",527504,45,"mainMenu:true},[\"widget.mainMenu\"],0,[Instinct.view.main,\"Menu",523167,33,"controller.Ma",526732,32,"refs:{Main:\"Main\"},control:{\"instinctMain button",524062,43,"instinctMain button#loginButton\":{tap:\"login\"}}},showRegister:function(b,c,a){viewAlias=\"userRegister\";nav=b.up(\"navigationview\");pageToPush=Ext.widget(viewAlias);nav.push(pageToPush)},login:function(f,g,d){Ext.Viewport",480349,37,"\"Loading...\"});var i=f.up(\"instinctMain\").down(\"textfield[name=username]\").getValue();var c=f.up(\"instinctMain\").down(\"textfield[name=password]\").getValue();var b=[];var a=function(l,k){if(l.status===200){var j=Ext.JSON.decode(l.responseText);var e=j.user;if(j.success===true){settings.set(\"userId\",e.id);settings.set(\"userToken\",e.token);Ext.Viewport.unmask();viewAlias=\"mainMenu\";nav=f.up(\"navigationview\");pageToPush=Ext.widget(viewAlias);nav.push(pageToPush)}else{Ext.Viewport.unmask();Ext.Msg.alert(false,j.error)}}else{Ext.Viewport.unmask();Ext.Msg.alert(false,",524762,52,"h=function(j,e){Ext.Viewport.unmask();Ext.Msg.alert(false,\"Login Failure\")};if(i!==\"\"&&c!==\"\"){",524864,183,"{username:i,password:c},success:a,failure:h})}else{Ext.Viewport.unmask();Ext.Msg.alert(\"Please fill in the form\"",526384,39,"Main",523167,33,526463,116,"true}else{return false}",526764,54,526656,364,",manufacturer:device.manufacturer",527020,111,"controller.server.checkPlayerDat",526496,34,"heckToken:function(b){var c=settings.get(\"userId\");var d=settings.get(\"userToken\");if(c===false||d===false){b(false)}else{var a=function(h,g){if(h.status===200){var f=Ext.JSON.decode(h.responseText);if(f.errorHandle==\"alert\"){if(f.errorText!==\"\"){Ext.Msg.alert(false,f.errorText)}if(f.successText!==\"\"){Ext.Msg.alert(false,f.successText)}}if(f.success===true){b(true)}else{b(false",524740,67,";b(false)}};var e=function(g,f){b(false",524861,87,"checkToken",526138,99,"id:c,token:d},success:a,failure:e",526383,38,".server,\"checkPlayerData",523167,33,"controller.user.Register\",Ext.app.Controller,{config:{control:{\"userRegister button#registerButton\":{tap:\"onRegisterTap\"},\"userRegister button#cancelButton\":{tap:\"onCancelTap\"}}},onRegisterTap:function(g,h,i){var b",525102,70,"var f=g.up(\"userRegister\").down(\"textfield[name=username]\").getValue();var j=g.up(\"userRegister\").down(\"textfield[name=email]\").getValue();var k=g.up(\"userRegister\").down(\"textfield[name=password]\").getValue();var c=function(m,l){console.log(m);if(m",525335,37,"m",525373,36,"viewAlias=\"instinctMain\";nav=g.up(\"navigationview\");pageToPush=Ext.widget(viewAlias);nav.push(pageToPush);Ext.Msg.alert(false,e.successText)}else{Ext.Msg.alert(false,",525474,99,"l",525574,37,"l)};if(b===true){var d",525102,45,525678,223,"f,password:k,email:j,uuid:d.uuid,platform:d.platform,model:d.model,manufacturer:d.manufacturer},success:c",526028,214,"f,password:k,email:j",526312,50,",manufacturer:\"Unknown\"},success:c,failure:a})}},onCancelTap:function(b,c,a){viewAlias=\"instinctMain\";nav=b.up(\"navigationview\");pageToPush=Ext.widget(viewAlias);nav.push(pageToPush)",526764,36,"user,\"Register",523167,33,"controller.nativeFunctions.Sqlite",526901,32,"query:function(c,d,a,b){if(typeof a!==\"function\"){a=function(f){console.log(\"Query success: \"+c,d)}}if(typeof b!==\"function\"){b=function(f){console.log(f.message,c,d)}}sqlite.database.executeSql(c,d,a,b)},fetch:function(a){var c=[];for(var b=0;b<a.rows.length;b++){c.push(a.rows.item(b))}return c},getRows:function(b,f,d,a,c){var e=[];Ext.each(f,function(h,g){e.push(\"`\"+h+\"` = ?\")});fields=e.join(\" AND \");if(f.length>0){whereString=\" WHERE \"+fields}else{whereString=\"\"}sqlite.query(\"SELECT * FROM `\"+b+\"`\"+whereString,d,function(g){if(g.rows.length>0){a(sqlite.fetch(g))}else{a(false)}},c)},createTable:function(c,f,d,a,b){var e=[];Ext.each(f,function(h,g){if(d[g]){fieldType=d[g]}else{fieldType=\"text\"}e.push(\"`\"+h+\"` \"+fieldType)});if(e.length){fields=\",\"+e.join(\", \")}else{fields=\"\"}sqlite.query(\"CREATE TABLE IF NOT EXISTS `\"+c+\"` (`id` INTEGER PRIMARY KEY\"+fields+\");\",[],a,b)},insertRow:function(b,f,d,a,c){var e=[];Ext.each(f,function(h,g){e.push(\"`\"+h+\"`\")});fields=e.join(\", \");var e=[];Ext.each(d,function(h,g){e.push(\"?\")});values=e.join(\", \");sqlite.query(\"INSERT INTO `\"+b+\"` (\"+fields+\") VALUES (\"+values+\");\",d,function(g){a(g.insertId)},c)},updateRow:function(b,g,f,d,a,c){var e=[];Ext.each(f,function(i,h){e.push(\"`\"+i+\"` = ?\")});fields=e.join(\", \");d.push(g);sqlite.query(\"UPDATE `\"+b+\"` SET \"+fields+\" WHERE `id` = ?;\",d,function(){a(g)},c)},openDatabase:function(a){if(window.cordova&&window.sqlitePlugin){Ext.define(\"sqlite\",{singleton:true,insertRow:this.insertRow,updateRow:this.updateRow,getRows:this.getRows,query:this.query,createTable:this.createTable,fetch:this.fetch});window.sqlitePlugin.openDatabase({name:\"database.sqlite\",location:2,androidDatabaseImplementation:2},function(b){sqlite.database=b;a()})}else{console.log(\"ERROR: SQLITE PLUGIN NOT FOUND!\");if(window.cordova){Ext.Msg.alert(false,\"ERROR: SQLITE PLUGIN NOT FOUND!\")}a(",526384,37,".nativeFunctions,\"Sqlite",523167,33,"controller.client.database",526901,32,"createTables:function(a){if(window.cordova&&window.sqlitePlugin){this.checkUpdateTables();this.setSenchaStores();a()}else{a()}},setSenchaStores:function(){},deleteDatabase:function(a){window.sqlitePlugin.deleteDatabase({name:\"database.sqlite\",location:\"default\"},function(e){console.log(e)},function(e){console.log(e)});var d=Ext.StoreManager.removeAll();for(var b=0;b<d.length;b++){var c=d.keys[b];Ext.getStore(c).destroy()}window.localStorage.clear();a()},checkUpdateTables:function()",526763,37,"client,\"database",523167,33,"controller.main.Menu",526734,66,"main,\"Menu",523167,38,"user.Register",527678,101,527243,52,527900,241,",{xtype:\"button\",itemId:\"cancel",527388,34,"Or Cancel\"}]}},0,[\"userRegister",481116,47,",\"userRegister",527504,60,"userRegister:true},[\"widget.userRegister\"],0,[Instinct.view.user,\"Register",528355,49,"models:[\"user.Session\"],stores:[\"user.Session\"],views:[\"user.Register\",\"main.Menu\",\"mainViewport\",\"Holder\"],controllers:[\"Main",528471,89,",\"server.checkPlayerData\",\"user.Register\",\"client.settings\",\"nativeFunctions.Sqlite\",\"client.database\",\"main.Menu",528559,41,"Msg.defaultAllowedConfig.showAnimation=false;Ext.create(\"Instinct.view.Holder\",{fullscreen:true});viewport=Ext.getCmp(\"mainViewport\");var d=\"\";var c=function(e){Instinct.app.getController(\"client.settings\").loadSettings(e)};var b=function(e){Instinct.app.getController(\"client.database\").createTables(e)};var a=function(){d=Ext.widget(\"instinctMain\");var e=Instinct.app.getController(\"server.checkPlayerData\");var f=settings.get(\"userId\");var g=settings.get(\"userToken\");console.log(\"checking player data [\"+f+\"] [\"+g+\"]\");if(f===false||g===false){d=Ext.widget(\"instinctMain\");viewport.add(d)}else{e.checkToken(function(h){if(h===true){d=Ext.widget(\"mainMenu\");viewport.add(d)}else{d=Ext.widget(\"instinctMain\");viewport.add(d)}})}if(typeof navigator!==\"undefined\"&&typeof navigator.splashscreen!==\"undefined\"){setTimeout(function(){navigator.splashscreen.hide()},1000)}};",525103,44,"Sqlite\").openDatabase(function(){c(function(){b(function(){a()})})})}}",527103,33,"Main\",Ext.Panel,{config:{style:\"background-color: #000;\",items:[{xtype:\"image\",height:150,style:\"background-size:contain;\",src:\"resources/images/login.jpg\"},{xtype:\"container",523318,37,"fieldset\",itemId:\"loginForm",527744,35,527243,52,527997,92,"l",523376,116,"Or register here\"}]}]}},0,[\"instinctMain",481116,37,"instinctMain",527504,45,"instinctMain:true},[\"widget.instinctMain\"],0,[Instinct.view,\"Main\"],0));"]