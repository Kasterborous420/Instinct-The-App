{
    "type": "Ext.app.Application",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "appVersion": "Alpha_0.11",
        "controllers": [
            "user.Login",
            "nativeFunctions.cordova",
            "nativeFunctions.cameraPlugin",
            "nativeFunctions.devicePlugin",
            "server.checkPlayerData",
            "user.Register",
            "client.settings",
            "nativeFunctions.Sqlite",
            "client.database",
            "main.Menu",
            "server.versionControl",
            "server.sendData",
            "user.Verify"
        ],
        "models": [
            "user.Session"
        ],
        "name": "Instinct",
        "requires": [
            "Ext.MessageBox"
        ],
        "startupImage": null,
        "stores": [
            "user.Session"
        ],
        "views": [
            "main.Menu",
            "mainViewport",
            "Holder",
            "intro.Main",
            "user.VerifyAccount",
            "user.Register",
            "user.Login"
        ]
    },
    "name": "Application",
    "designerId": "application",
    "customConfigs": [
        {
            "group": "(Custom Properties)",
            "name": "appVersion",
            "type": "string"
        }
    ],
    "cn": [
        {
            "type": "fixedfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "launch",
                "implHandler": [
                    "Ext.Msg.defaultAllowedConfig.showAnimation = false;",
                    "Ext.create('Instinct.view.Holder', {fullscreen: true});",
                    "",
                    "var viewport \t\t= Ext.getCmp('mainViewport');",
                    "var newActiveItem\t= \"\";",
                    "var introItem \t\t= Ext.widget('introMain');",
                    "",
                    "if(typeof navigator !== 'undefined' && typeof navigator.splashscreen !== 'undefined'){",
                    "    setTimeout(function(){",
                    "        navigator.splashscreen.hide();",
                    "    },2000);",
                    "}",
                    "",
                    "var loadSettings = function(callbackFn){",
                    "    Instinct.app.getController('client.settings').loadSettings(callbackFn);",
                    "};",
                    "var createTables = function(callbackFn){",
                    "    Instinct.app.getController('client.database').createTables(callbackFn);",
                    "};",
                    "",
                    "",
                    "var openIntro\t= function(callbackFn){",
                    "    if(typeof navigator !== 'undefined' && typeof navigator.splashscreen !== 'undefined'){",
                    "        setTimeout(function(){",
                    "            viewport.add(introItem);",
                    "            callbackFn();",
                    "            navigator.splashscreen.hide();",
                    "        },250);",
                    "    }else{",
                    "        viewport.add(introItem);",
                    "        callbackFn();",
                    "    }",
                    "};",
                    "var openApp \t= function(){",
                    "    var serverFunc \t= Instinct.app.getController(\"server.checkPlayerData\");",
                    "    var serverVer\t= Instinct.app.getController(\"server.versionControl\");",
                    "    serverVer.checkServerVersion(function(serverVersion){",
                    "        if(serverVersion !== Instinct.app.appVersion && serverVersion !== \"Error\"){",
                    "            Ext.Msg.alert(false,\"New version [\"+serverVersion+\"] is out, please update the app.\");",
                    "        }else{",
                    "            var userId\t\t= settings.get('userId');",
                    "            var userToken\t= settings.get('userToken');",
                    "            if(userId === false || userToken === false){",
                    "                setTimeout(function(){",
                    "                    newActiveItem \t= Ext.widget('instinctMain');",
                    "                    viewport.remove(introItem);",
                    "                    viewport.add(newActiveItem);",
                    "                }, 2000);",
                    "            }else{",
                    "                serverFunc.checkToken(function(result){",
                    "                    if(result === true){",
                    "                        setTimeout(function(){",
                    "                            newActiveItem \t= Ext.widget('mainMenu');",
                    "                            viewport.add(newActiveItem);",
                    "                            viewport.remove(introItem);",
                    "                        }, 2000);",
                    "                    }else{",
                    "                        setTimeout(function(){",
                    "                            newActiveItem \t= Ext.widget('instinctMain');",
                    "                            viewport.remove(introItem);",
                    "                            viewport.add(newActiveItem);",
                    "                        }, 2000);",
                    "                    }",
                    "                });",
                    "            }",
                    "        }",
                    "    });",
                    "};",
                    "",
                    "Instinct.app.getController('nativeFunctions.Sqlite').openDatabase(function(){",
                    "    createTables(function(){",
                    "        loadSettings(function(){",
                    "            openIntro(function(){",
                    "                openApp();",
                    "            });",
                    "        });",
                    "    });",
                    "});"
                ]
            },
            "name": "launch",
            "designerId": "024acadb-3f8f-40ec-8a42-944b06cd62f6"
        }
    ]
}